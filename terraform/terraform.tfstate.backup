{
  "version": 4,
  "terraform_version": "1.13.5",
  "serial": 15,
  "lineage": "05636dee-3000-a66a-98d6-0ff37c8bbc14",
  "outputs": {
    "app_addresses": {
      "value": "Check Nomad UI at http://localhost:4646/ui/jobs/app",
      "type": "string"
    },
    "approle_role_id": {
      "value": "d0df8ff6-6be3-c1d0-7c82-bb6ab8e23ce3",
      "type": "string"
    },
    "approle_secret_id": {
      "value": "79188108-1671-bb79-1a0e-72f9017abfab",
      "type": "string",
      "sensitive": true
    },
    "vault_db_role_name": {
      "value": "app-db-role",
      "type": "string"
    }
  },
  "resources": [
    {
      "mode": "managed",
      "type": "vault_approle_auth_backend_role",
      "name": "app_role",
      "provider": "provider[\"registry.terraform.io/hashicorp/vault\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "backend": "approle",
            "bind_secret_id": true,
            "id": "auth/approle/role/app-role",
            "namespace": null,
            "role_id": "d0df8ff6-6be3-c1d0-7c82-bb6ab8e23ce3",
            "role_name": "app-role",
            "secret_id_bound_cidrs": [],
            "secret_id_num_uses": 0,
            "secret_id_ttl": 0,
            "token_bound_cidrs": [],
            "token_explicit_max_ttl": 0,
            "token_max_ttl": 14400,
            "token_no_default_policy": false,
            "token_num_uses": 0,
            "token_period": 0,
            "token_policies": [
              "app-policy"
            ],
            "token_ttl": 3600,
            "token_type": "default"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "vault_auth_backend.approle",
            "vault_policy.app_policy"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "vault_approle_auth_backend_role_secret_id",
      "name": "app_secret_id",
      "provider": "provider[\"registry.terraform.io/hashicorp/vault\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "accessor": "71f41301-e2a9-42fd-0de7-610b91bae120",
            "backend": "approle",
            "cidr_list": [],
            "id": "backend=approle::role=app-role::accessor=71f41301-e2a9-42fd-0de7-610b91bae120",
            "metadata": "{}",
            "namespace": null,
            "num_uses": 0,
            "role_name": "app-role",
            "secret_id": "79188108-1671-bb79-1a0e-72f9017abfab",
            "ttl": 0,
            "with_wrapped_accessor": null,
            "wrapping_accessor": null,
            "wrapping_token": null,
            "wrapping_ttl": null
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "secret_id"
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "wrapping_token"
              }
            ]
          ],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "vault_approle_auth_backend_role.app_role",
            "vault_auth_backend.approle",
            "vault_policy.app_policy"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "vault_auth_backend",
      "name": "approle",
      "provider": "provider[\"registry.terraform.io/hashicorp/vault\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "accessor": "auth_approle_30556bd7",
            "description": "",
            "disable_remount": false,
            "id": "approle",
            "identity_token_key": null,
            "local": false,
            "namespace": null,
            "path": "approle",
            "tune": [
              {
                "allowed_response_headers": [],
                "audit_non_hmac_request_keys": [],
                "audit_non_hmac_response_keys": [],
                "default_lease_ttl": "768h",
                "listing_visibility": "",
                "max_lease_ttl": "768h",
                "passthrough_request_headers": [],
                "token_type": "default-service"
              }
            ],
            "type": "approle"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "vault_kv_secret_v2",
      "name": "app_secret",
      "provider": "provider[\"registry.terraform.io/hashicorp/vault\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "cas": null,
            "custom_metadata": [
              {
                "cas_required": false,
                "data": {},
                "delete_version_after": 0,
                "max_versions": 0
              }
            ],
            "data": {},
            "data_json": "{\"password\":\"s3cr3tP@ssw0rd\",\"username\":\"appuser\"}",
            "data_json_wo": null,
            "data_json_wo_version": null,
            "delete_all_versions": false,
            "disable_read": false,
            "id": "secret/data/myapp",
            "metadata": {
              "created_time": "2025-11-06T20:44:40.988316311Z",
              "custom_metadata": "null",
              "deletion_time": "",
              "destroyed": "false",
              "version": "4"
            },
            "mount": "secret",
            "name": "myapp",
            "namespace": null,
            "options": null,
            "path": "secret/data/myapp"
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "data"
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "data_json"
              }
            ]
          ],
          "identity_schema_version": 0,
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "vault_mount",
      "name": "database",
      "provider": "provider[\"registry.terraform.io/hashicorp/vault\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "accessor": "database_31437a7b",
            "allowed_managed_keys": [],
            "allowed_response_headers": [],
            "audit_non_hmac_request_keys": [],
            "audit_non_hmac_response_keys": [],
            "default_lease_ttl_seconds": 0,
            "delegated_auth_accessors": [],
            "description": "Database secrets engine for dynamic DB creds",
            "external_entropy_access": false,
            "force_no_cache": false,
            "id": "database",
            "identity_token_key": "",
            "listing_visibility": "",
            "local": false,
            "max_lease_ttl_seconds": 0,
            "namespace": null,
            "options": {},
            "passthrough_request_headers": [],
            "path": "database",
            "plugin_version": null,
            "seal_wrap": false,
            "type": "database"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "vault_policy",
      "name": "app_policy",
      "provider": "provider[\"registry.terraform.io/hashicorp/vault\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "app-policy",
            "name": "app-policy",
            "namespace": null,
            "policy": "path \"secret/data/myapp\" {\r\n  capabilities = [\"read\"]\r\n}\r\n"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA=="
        }
      ]
    }
  ],
  "check_results": null
}
